local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")

-- ===== GUI NEGRA =====
local gui = Instance.new("ScreenGui")
gui.Name = "AutoComerEggsUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 320, 0, 180)
frame.Position = UDim2.new(0.35, 0, 0.35, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BorderSizePixel = 0
frame.Active = true
frame.Parent = gui

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Auto comer Eggs By Johan"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = frame

-- ===== BOTÃ“N ON/OFF =====
local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(0, 220, 0, 50)
toggle.Position = UDim2.new(0.5, -110, 0.55, -25)
toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toggle.Text = "Activar Auto Comer"
toggle.TextColor3 = Color3.fromRGB(255,255,255)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 16
toggle.Parent = frame

Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 10)

-- ===== SISTEMA ARRASTRAR (dedo o mouse) =====
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	frame.Position = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
end

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch
	or input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

frame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch
	or input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- ===== AUTO COMER HUEVOS =====
local autoEatEnabled = false

local function eatProteinEgg()
	local backpack = player:WaitForChild("Backpack")
	local character = player.Character or player.CharacterAdded:Wait()

	local egg = backpack:FindFirstChild("Protein Egg")
	if egg then
		egg.Parent = character
		pcall(function()
			egg:Activate()
		end)
		return true
	else
		return false
	end
end

task.spawn(function()
	while true do
		if autoEatEnabled then
			local ate = eatProteinEgg()
			if ate then
				task.wait(2) -- 1 huevo cada 0.45 Milisegundos 
			else
				task.wait(1) -- ya no hay, sigue revisando
			end
		else
			task.wait(1)
		end
	end
end)

toggle.MouseButton1Click:Connect(function()
	autoEatEnabled = not autoEatEnabled
	if autoEatEnabled then
		toggle.Text = "Desactivar Auto Comer"
		toggle.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
	else
		toggle.Text = "Activar Auto Comer"
		toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	end
end)
